<html>
    <head>
        <!-- CSS only -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
        <script>
            !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.async=!0,p.src=s.api_host+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
            posthog.init('phc_CHNw1P7pkQP2e8QOGAMH5YGsr2K7612fkeK6VLh5KNF',{api_host:'http://127.0.0.1:8000'})
        </script>
        <style>
            .diagram-text {
                font-size: 14px;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <div id="uml">
                        <br>
                        <h1>RALE Modules, a Process Management Tool for Sensemaking</h1>
                        <h3>Diagrams and Activities for Learning Design Patterns and Architectures from Professional Code</h3>
                    </div>
                    <br>
                    <div id="mixins">
                        <!--{{dp}}-->
                        <h2>Mixins</h2>
                        <p>Check the boxes after reading the statements. Fill in the text boxes.</p>
                        <table class="table">
                            <tr>
                                <th style="width: 15%">Theory</th>
                                <th style="width: 42%">Canonical / Tutorial Example</th>
                                <th style="width: 43%">Professional Example ({{ dp.project }})</th>
                            </tr>
                            <tr>
                                <td>
                                    <u>Definitions</u><br><br>
                                    <p><input type="checkbox"/> A mixin is a class from which other classes can adopt methods and properties.</p>
                                    <p><input type="checkbox"/> Mixins are used if you don't want a class to "inherit" from another class (i.e. be its child class) but you want it to "include" some attributes / methods.</p>
                                    <p><input type="checkbox"/> You can think of mixins as uncles and aunts but not necessarily parents. They help avoid issues and complexities of multiple inheritance. e.g. If <a target="_blank" href="/static/ralemodules/diamondproblem.png">class TA has parents Student and Faculty</a>, both of whose parent is Person, then does TA use Student or Faculty's version of any given method, or both's?</p>
                                </td>
                                <td>
                                    <p><input type="checkbox"/> For an example, consider <a href="https://pypi.org/project/Werkzeug/#a-simple-example" target="_blank">werkzeug</a>, which is an HTTP request and response system. Werkzeug needs to support regular HTTP requests, but also:</p>
                                    <ul>
                                        <li>requests that accept <i>header support</i>, which enables the system to retrieve all the relevant HTTP accept headers, that in turn determine the type of content the client can support</li>
                                        <li>requests that support accept headers, etags (entity tags which help the web cache only request for information it needs), authentication, and user agent support (which lets servers access frontend client data such as the OS, browser, etc.)</li>
                                </td>
                                <td>
                                    <img alt="posthog example" style="width:100%" src="http://127.0.0.1:9000/static/ralemodules/posthog.png"/>
                                    <br><br>
                                    <p><input type="checkbox"/> Watch this video on how Posthog's features work: <a href="#">Posthog Features Video</a></p>
                                    <br>
                                    <p>Play around with these Posthog demos: 
                                    <ul>
                                        <li><input type="checkbox"/> <a href="#">Regular Posthog Version</a></li>
                                        <li><input type="checkbox"/> <a href="#">Enterprise Posthog Version</a></p></li>
                                    </ul>
                                    
                                </td>
                            </tr>
                            <tr>
                                <td class="diagram-text">
                                    <u style="font-size:medium;">Diagrams</u><br><br>
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="row">
                                                <div class="col-sm-8">
                                                    <b>Mixin →</b>
                                                    <p>method1</p>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-sm-8">
                                                    <b>Mixin 2</b>
                                                    <p>method2</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <b>Adopter Class</b>
                                            <p>method1</p>
                                            <p>method2</p>
                                        </div>
                                    </div>
                                </td>
                                <td class="diagram-text">
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="row">
                                                <div class="col-sm-8">
                                                    <b>AcceptMixin</b>
                                                    <p>method_from_accept_mixin</p>
                                                </div>
                                                <div class="col-sm-4">
                                                    <p>→</p>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-sm-8">
                                                    <b>BaseRequest</b>
                                                    <p>property_from_base_request</p>
                                                </div>
                                                <div class="col-sm-4">
                                                    <p>→</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <b>SpecialRequest</b>
                                            <p>method_from_accept_mixin</p>
                                            <p>property_from_base_request</p>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="row">
                                                <div class="col-sm-8">
                                                    <b>AcceptMixin</b>
                                                    <p>method_from_accept_mixin</p>
                                                </div>
                                                <div class="col-sm-4">
                                                    <p>→</p>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-sm-8">
                                                    <b>BaseRequest</b>
                                                    <p>property_from_base_request</p>
                                                </div>
                                                <div class="col-sm-4">
                                                    <p>→</p>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-sm-8">
                                                    <b>ETagRequestMixin</b>
                                                    <p>method_from_e_tag_request_mixin</p>
                                                </div>
                                                <div class="col-sm-4">
                                                    <p>→</p>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-sm-8">
                                                    <b>UserAgentMixin</b>
                                                    <p>property_from_user_agent_mixin</p>
                                                </div>
                                                <div class="col-sm-4">
                                                    <p>→</p>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-sm-8">
                                                    <b>AuthenticationMixin</b>
                                                    <p>method_from_authentication_mixin</p>
                                                </div>
                                                <div class="col-sm-4">
                                                    <p>→</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <b>ExtraSpecialRequest</b>
                                            <p>method_from_accept_mixin</p>
                                            <p>property_from_base_request</p>
                                            <p>method_from_e_tag_request_mixin</p>
                                            <p>property_from_user_agent_mixin</p>
                                            <p>method_from_authentication_mixin</p>
                                        </div>
                                    </div>
                                </td>
                                <td class="diagram-text">
                                    {% for class, details in dp.classes_by_mixins.items %}
                                        <div class="row">
                                            <div class="col-sm-6">
                                                {% for mixin_adopted, mixin_details in details.items %}
                                                    <b>{{ mixin_adopted }} &nbsp;→</b>
                                                    {% for pm_adopted in mixin_details %}
                                                        <p>{{pm_adopted}}</p>
                                                    {% endfor %}
                                                {% endfor %}
                                            </div>
                                            <div class="col-sm-6">
                                            <b>{{class}}</b>
                                            {% for pm_adopted in dp.classes_by_propmethods|get_value:class %}
                                                <p>{{pm_adopted}}</p>
                                            {% endfor %}
                                            </div>
                                        </div>
                                        <hr>
                                    {% endfor %}
                                    <!--Begin Hard Coding-->
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <u>Goals</u><br><br>
                                    <ul>
                                        <li><input type="checkbox"/> inherit functionality</li>
                                        <li><input type="checkbox"/> mix/match functionality</li>
                                    </ul>
                                </td>
                                <td>
                                    <ul>
                                        <li><input type="checkbox"/> wants to let some requests support header functionality</li>
                                        <li><input type="checkbox"/> but others to support headers, auth, tags, etc.</li>
                                    </ul>
                                </td>
                                <td>
                                    Actions, Insights, Dashboards need to:
                                    <ol>
                                        <li><input type="checkbox"/> check the logged in user's access to data</li>
                                        <li><input type="checkbox"/> add tags to data of pro account users</li>
                                    </ol>
                                    but ClickHouseGroupTypes only need to do #1.
                                </td>
                            <tr>                                                                                                                                                            <tr>
                                <td>
                                    <u>Data flow and relevant code snippets</u> can often be important to consider.
                                </td>
                                <td>
                                    <p>In Werkzeug, I can make a plain request object by saying:</p>
                                    <pre style="white-space: pre-wrap; /* Since CSS 2.1 */ white-space: -moz-pre-wrap; /* Mozilla, since 1999 */ white-space: -pre-wrap; /* Opera 4-6 */ white-space: -o-pre-wrap; /* Opera 7 */ word-wrap: break-word;">
from werkzeug import BaseRequest
class RegularRequest(BaseRequest):
    pass
                                    </pre>
                                    <p><input type="checkbox"/> If I want to add accept header support, which enables getting all HTTP accept headers (which determines the type of content the client can support) into a single object, I would instead write:</p>
                                    <pre style="white-space: pre-wrap; /* Since CSS 2.1 */ white-space: -moz-pre-wrap; /* Mozilla, since 1999 */ white-space: -pre-wrap; /* Opera 4-6 */ white-space: -o-pre-wrap; /* Opera 7 */ word-wrap: break-word;">
from werkzeug import BaseRequest, AcceptMixin
    class SpecialRequest(AcceptMixin, BaseRequest):
        def sr_method:
            method_from_accept_mixin(property_from_base_request)
                                    </pre>
                                    <p><input type="checkbox"/> If I wanted to make a request object that supports accept headers, etags (entity tags which help the web cache only request for information it needs), authentication, and user agent support (which lets servers access frontend client data such as the OS, browser, etc.), I could do this:<p>
                                    <pre style="white-space: pre-wrap; /* Since CSS 2.1 */ white-space: -moz-pre-wrap; /* Mozilla, since 1999 */ white-space: -pre-wrap; /* Opera 4-6 */ white-space: -o-pre-wrap; /* Opera 7 */ word-wrap: break-word;">
from werkzeug import BaseRequest, AcceptMixin, ETagRequestMixin, UserAgentMixin, AuthenticationMixin

class ExtraSpecialRequest(AcceptMixin, ETagRequestMixin, UserAgentMixin, AuthenticationMixin, BaseRequest):
    def esr_method:
        method_from_accept_mixin(property_from_base_request)
        method_from_e_tag_request_mixin(property_from_user_agent_mixin)
        method_from_authentication_mixin()
                                    </pre>
                                </td>
                                <td>

                                </td>
                            </tr>                               
                            <tr>
                                <td>
                                    <u>Rationales</u><br><br>
                                    <p><input type="checkbox"/> A mixin is an object that we can use in order to add reusable functionality to another object or class, without using inheritance. We can't use mixins on their own: their sole purpose is to add functionality to objects or classes without inheritance (src: <a href="https://www.patterns.dev/posts/mixin-pattern/" target="_blank">1</a>, <a href="https://www.geeksforgeeks.org/multiple-inheritance-in-c/" target="_blank">2</a>).</p> 
                                    <p><input type="checkbox"/> Mixins can be used in this way by multiple classes, for code reusability. They are used to avoid code repetition and promote code reuse, so there is less complexity and room for error. This helps with collaboration.</p>
                                    <p><input type="checkbox"/> A mixin is a special kind of multiple inheritance. There are two main situations where mixins are used: 
                                        <ul>
                                            <li>You want to provide a lot of optional features for a class.</li>
                                            <li>You want to use one particular feature in a lot of different classes.</li>
                                        </ul>
                                    </p>
                                    <p><input type="checkbox"/> Another situation is: you want to provide a lot of (not-optional) features for a class, but you want the features in separate classes (and in separate modules) so each module is about one feature (behavior). In other words, not for re-use, but for compartmentalization. In this way, code at different levels (data touching, logic, view touching, etc.) is separated so different developers can collaborate easily.</p>
                                    <p><input type="checkbox"/> Mixins can be used for adding lots of optional attributes/methods. You may want a class to avail of several optional properties or methods.</p>
                                    <p><input type="checkbox"/> <b>Multiple Versions of Methods / Props Note</b>: When mixin A and mixin B each define the same method / property X, then an instance of class C, which adopts both mixins A and B, follows a method resolution order (MRO) to determine which version of X (A's or B's) to run. By using the super() syntax in A and B's version of the method / property X, one can even get both versions of X to run in sequence, one after another. This is a benefit of using super() with multiple inheritance, i.e. Python mixins<!--, depending on the MRO of the class of the object involved.--> (src: <a target="_blank" href="https://www.pythontutorial.net/python-oop/python-mixin/">1</a>, <a href="https://www.thedigitalcatonline.com/blog/2020/03/27/mixin-classes-in-python/">2</a>, <a target="_blank" href="https://stackoverflow.com/questions/3277367/how-does-pythons-super-work-with-multiple-inheritance">3</a>, <a target="_blank" href="https://stackoverflow.com/questions/576169/understanding-python-super-with-init-methods/576183#576183">4</a>, <a href="https://www.artima.com/weblogs/viewpost.jsp?thread=236275">5</a>, <a target="_blank" href="https://stackoverflow.com/questions/55994700/why-doesnt-super-class-name-return-the-name-of-my-base-class">6</a>, <a target="_bl
                                        " href="https://stackoverflow.com/questions/47117327/is-mro-order-depth-first-or-breadth-first">7</a>).</p>
                                </td>
                                <td>
                                    <p><input type="checkbox"/> The difference is subtle, but in the werkzeug example, the mixin classes weren't made to stand on their own. In more traditional multiple inheritance, the AuthenticationMixin (for example) would probably be something more like Authenticator. That is, the class would probably be designed to stand on its own (src: <a href="https://stackoverflow.com/questions/533631/what-is-a-mixin-and-why-is-it-useful/547714#547714" target="_blank">1</a>, <a href="https://stackoverflow.com/questions/860245/mixin-vs-inheritance#:~:text=Frequently%20the%20mix%2Din%20is,functionality%20in%20multiple%20different%20classes" target="_blank">2</a>)</p>
                                    <p><input type="checkbox"/> Here werkzeug's SpecialRequest and ExtraSpecialRequest both use AcceptMixin.</p>
                                    <p><input type="checkbox"/> Here werkzeug is adding optional features for SpecialRequest and even more optional features for ExtraSpecialRequest.</p>
                                    <p><input type="checkbox"/> Here AcceptMixin, ETagRequestMixin, UserAgentMixin, AuthenticationMixin each represent compartmentalized implementations of particular functionalities.</p>
                                    <p><input type="checkbox"/> For instance in the werkzeug's request and response example, mixins let you allow more supports as needed, but not by default, to instances of Request. Adding mixins to classes let you layer on additional functionality as needed.</p>
                                </td>

                            </tr>
                            <tr>
                                <td>Tradeoffs / Alternatives</td>
                            </tr>
                        </table>
                        

                        
                        <br>
                        <h6>TaggedItemViewSetMixin code:</h6>
                        <pre><code>
class TaggedItemViewSetMixin(viewsets.GenericViewSet):
    def is_licensed(self):
        return (
            not self.request.user.is_anonymous
            # The below triggers an extra query to resolve user's organization.
            and self.request.user.organization.is_feature_available(AvailableFeature.TAGGING)  
            # type: ignore
        )

    def get_queryset(self):
        queryset = super(TaggedItemViewSetMixin, self).get_queryset()
        if self.is_licensed():
            to_return = queryset.prefetch_related(
                Prefetch("tagged_items", queryset=TaggedItem.objects.select_related("tag"), to_attr="prefetched_tags")
            )
        return queryset
                        </code></pre>
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Insight data before the TaggedItemViewSetMixin is applied:</h6>
                                <p>This is data for the "Formative project" on the licensed account.</p>
                                <pre><code>Insight object (21) Daily Active Users (DAUs) from TIVSM
tagged items: posthog.TaggedItem.None

Insight object (22) Cumulative DAUs from TIVSM
tagged items: posthog.TaggedItem.None

Insight object (23) Repeat users over time from TIVSM
tagged items: posthog.TaggedItem.None

Insight object (24) Sample - Purchase conversion funnel from TIVSM
tagged items: posthog.TaggedItem.None

Insight object (25) Users by browser (last 2 weeks) from TIVSM
tagged items: posthog.TaggedItem.None

Insight object (26) Users by traffic source from TIVSM
tagged items: posthog.TaggedItem.None

# and if we try to print pre_fetched tags for each of the above, 
we get the following, for each of the above insight objects:
AttributeError: 'Insight' object has no attribute 'prefetched_tags'</code></pre>
                                <br><br>
                                <h6>Insight data after the TaggedItemViewSetMixin is applied:</h6>
                                <p>This is data for the "Formative project" on the licensed account.</p>
                                <pre><code>tivsm postInsight object (21)
tagged items: 
tag: official

tivsm postInsight object (22)
tagged items: 
tag: official tag
tag: great
tag: excellent
tag: another one
tag: frog
tag: grammar
tag: egret
tag: hippo

tivsm postInsight object (23), tagged items: 
tag: good

tivsm postInsight object (24), tagged items: 

tivsm postInsight object (25), tagged items: 

tivsm postInsight object (26), tagged items: </code></pre>
                            </div>
                            <div class="col-md-6">
                                <br>
                                <h6>Insight data before the TaggedItemViewSetMixin is applied:</h6>
                                <p>This is data for the non-licensed account.</p>
                                <pre><code>Insight object (21) Daily Active Users (DAUs) from TIVSM
tagged items: posthog.TaggedItem.None

Insight object (22) Cumulative DAUs from TIVSM
tagged items: posthog.TaggedItem.None

Insight object (23) Repeat users over time from TIVSM
tagged items: posthog.TaggedItem.None

Insight object (24) Sample - Purchase conversion funnel from TIVSM
tagged items: posthog.TaggedItem.None

Insight object (25) Users by browser (last 2 weeks) from TIVSM
tagged items: posthog.TaggedItem.None

Insight object (26) Users by traffic source from TIVSM
tagged items: posthog.TaggedItem.None

# and if we try to print pre_fetched tags for each of the above, 
we get the following, for each of the above insight objects:
AttributeError: 'Insight' object has no attribute 'prefetched_tags'</code></pre>
                                <br><br>
                                <h6>Insight data after the TaggedItemViewSetMixin is applied:</h6>
                                <p>This is data for the non-licensed account.</p>
                                <pre><code>tivsm postInsight object (21) 
tagged items: 
# nothing was printed here
tivsm postInsight object (22)
tagged items: 
# nothing was printed here
tivsm postInsight object (23)
tagged items: 
# nothing was printed here
tivsm postInsight object (24)
tagged items: 
# nothing was printed here
tivsm postInsight object (25)
tagged items: 
# nothing was printed here
tivsm postInsight object (26)
tagged items: 
# nothing was printed here

and if we try to print pre_fetched tags for each of the above
we get the following for each of the above insight objects:
AttributeError: 'Insight' object has no attribute 'prefetched_tags'</code></pre>
                            </div>
                        </div>
                        <br>
                        <h6>StructuredViewSetMixin code:</h6>
                        <pre><code>
class StructuredViewSetMixin(_GenericViewSet):
    ...

    def get_queryset(self):
        queryset = super().get_queryset()
        to_return = self.filter_queryset_by_parents_lookups(queryset)
        return to_return
    
    @property
    def team_id(self) -> int:
        team_from_token = self._get_team_from_request()
        if team_from_token:
            return team_from_token.id
        if self.legacy_team_compatibility:
            user = cast(User, self.request.user)
            team = user.team
            assert team is not None
            return team.id
        return self.parents_query_dict["team_id"]
    
    @property
    def team(self) -> Team:
        team_from_token = self._get_team_from_request()
        if team_from_token:
            return team_from_token
        user = cast(User, self.request.user)
        if self.legacy_team_compatibility:
            team = user.team
            assert team is not None
            return team
        try:
            return Team.objects.get(id=self.team_id)
        except Team.DoesNotExist:
            raise NotFound(detail="Project not found.")
    
    @property
    def organization_id(self) -> str:
        try:
            return self.parents_query_dict["organization_id"]
        except KeyError:
            return str(self.team.organization_id)
    
    @property
    def organization(self) -> Organization:
        try:
            return Organization.objects.get(id=self.organization_id)
        except Organization.DoesNotExist:
            raise NotFound(detail="Organization not found.")
    
    def filter_queryset_by_parents_lookups(self, queryset):
        parents_query_dict = self.parents_query_dict.copy() 
        for source, destination in self.filter_rewrite_rules.items():
            parents_query_dict[destination] = parents_query_dict[source]
            del parents_query_dict[source]
        if parents_query_dict:
            try:
                return queryset.filter(**parents_query_dict)
            except ValueError:
                raise NotFound()
        else:
            return queryset
    
    @cached_property
    def parents_query_dict(self) -> Dict[str, Any]:
        # used to override the last visited project if there's a token in the request
        team_from_request = self._get_team_from_request()
        if self.legacy_team_compatibility: 
            if not self.request.user.is_authenticated:
                raise AuthenticationFailed()
            project = team_from_request or self.request.user.team
            if project is None:
                raise ValidationError("This endpoint requires a project.")
            return {"team_id": project.id}
        result = {}

        # process URL paremeters (here called kwargs), such as organization_id in /api/organizations/:organization_id/
        for kwarg_name, kwarg_value in self.kwargs.items():
            # drf-extensions nested parameters are prefixed
            if kwarg_name.startswith(extensions_api_settings.DEFAULT_PARENT_LOOKUP_KWARG_NAME_PREFIX):
                query_lookup = kwarg_name.replace(
                    extensions_api_settings.DEFAULT_PARENT_LOOKUP_KWARG_NAME_PREFIX, "", 1
                )
                query_value = kwarg_value
                if query_value == "@current":
                    if not self.request.user.is_authenticated:
                        raise AuthenticationFailed()
                    if query_lookup == "team_id":
                        project = self.request.user.team
                        if project is None:
                            raise NotFound("Project not found.")
                        query_value = project.id
                    elif query_lookup == "organization_id":
                        organization = self.request.user.organization
                        if organization is None:
                            raise NotFound("Organization not found.")
                        query_value = organization.id
                elif query_lookup == "team_id":
                    try:
                        query_value = team_from_request.id if team_from_request else int(query_value)
                    except ValueError:
                        raise NotFound()
                result[query_lookup] = query_value
        return result
    
    def get_serializer_context(self) -> Dict[str, Any]:
        return {**super().get_serializer_context(), **self.parents_query_dict}
    
    def _get_team_from_request(self) -> Optional["Team"]:
        team_found = None
        token = get_token(None, self.request)
        if token:
            team = Team.objects.get_team_from_token(token)
            if team:
                team_found = team
            else:
                raise AuthenticationFailed()
        return team_found
                        </code></pre>
                        <div class="row">
                            <div class="col-md-12">
                                <br><br>
                                <h6>Insight data before the StructuredViewSetMixin is applied:</h6>
                                <pre><code>
Insight object (6) Users by traffic source for team Default Project
Insight object (8) for team Default Project
Insight object (9) for team Default Project
Insight object (10) for team Default Project
Insight object (3) Repeat users over time for team Default Project
Insight object (11) for team Default Project
Insight object (13) Pageview count for team Default Project
Insight object (1) Daily Active Users (DAUs) for team Default Project
Insight object (12) for team Default Project
Insight object (14) Page view user conversion rate for team Default Project
Insight object (5) Users by browser (last 2 weeks) for team Default Project
Insight object (15) Retention of users based on doing Pageview for the first time and returning with the same event for team Default Project
Insight object (16) for team Default Project
Insight object (17) User paths based on page views for team Default Project
Insight object (19) for team Default Project
Insight object (2) Cumulative DAUs for team Default Project
Insight object (18) User stickiness based on Pageview for team Default Project
Insight object (7) for team Default Project
Insight object (20) Pageview count for team Default Project
Insight object (4) Sample - Purchase conversion funnel for team Default Project
Insight object (23) Repeat users over time for team Formative Project
Insight object (26) Users by traffic source for team Formative Project
Insight object (25) Users by browser (last 2 weeks) for team Formative Project
Insight object (24) Sample - Purchase conversion funnel for team Formative Project
Insight object (22) Cumulative DAUs for team Formative Project
Insight object (21) Daily Active Users (DAUs) for team Formative Project										
                                </code></pre>
                                <h6>Insight data before the StructuredViewSetMixin is applied:</h6>
                                <pre><code>
Insight object (21) Daily Active Users (DAUs) for team Formative Project
Insight object (22) Cumulative DAUs for team Formative Project
Insight object (23) Repeat users over time for team Formative Project
Insight object (24) Sample - Purchase conversion funnel for team Formative Project
Insight object (25) Users by browser (last 2 weeks) for team Formative Project
Insight object (26) Users by traffic source for team Formative Project
                                </code></pre>
                            </div>
                        </div>
                        <!--End Hard Coding-->
                        {% for mixin, details in dp.mixins.items %}
                            <h4 id="mixin-{{mixin}}">{{mixin}}</h4>
                            <p>Activity 1: Scan the mixin code of {{mixin}}, found in {{details.file_path}} (see the snippet above). Summarize what you think the Mixin does:
                                <br><span style="font-size: 10px;">Pacing: Perhaps reserve ~1 min for this question.</span>
                            </p>
                            <textarea rows="2" style="width: 100%; max-width: 100%;"></textarea>
                            <br><br>
                            <p id="mixin-{{mixin}}-a2">Activity 2: List some classes in this codebase that use the {{mixin}} mixin. Hint, look at the "Mixins of {{ dp.project }}" diagram above.
                                <br><span style="font-size: 10px;">Pacing: Perhaps reserve ~1 min for this question.</span>
                            </p>
                            <textarea rows="2" style="width: 100%; max-width: 100%;"></textarea>
                            <br><br>
                            {% for prop_method in details.prop_methods%}
                                <h6 id="mixin-{{mixin}}-{{prop_method}}-3a">{{prop_method}}</h6>
                                <p>Activity 3A: List the classes / class instances that adopt / use the {{mixin}}'s method <b>{{prop_method}}</b>. Hint, look at the "Mixins of {{ dp.project }}" diagram above.
                                    <br><span style="font-size: 10px;">Pacing: Perhaps reserve ~1 min for this question.</span>
                                </p>
                                <textarea rows="2" style="width: 100%; max-width: 100%;"></textarea>
                                <br><br>
                                <p id="mixin-{{mixin}}-{{prop_method}}-3c">Activity 3B: Describe how this Mixin's <b>{{prop_method}}</b> method is being used. i.e. What does this Mixin's <b>{{prop_method}}</b> do? i.e. what does the class that adopts this Mixin's <b>{{prop_method}}</b> do (look at the code of the classes you mentioned in 3A)?
                                    <br><span style="font-size: 10px;">Pacing: Perhaps reserve ~2 min for this question.</span>
                                </p>
                                <textarea rows="2" style="width: 100%; max-width: 100%;"></textarea>
                                <br><br>
                                <p id="mixin-{{mixin}}-{{prop_method}}-4b">Activity 4: Explain why mixins (i.e. {{mixin}}) are used in {{dp.project}}? Hint, see the 3 general ideas bulletted <a href="#">at the end of the Mixins lesson above</a> ("Mixins can be used for ..."). Then take another look at the {{dp.project}} application as a user. Remember the "Multiple Versions of Methods / Props Note" above. Think carefully about the <b>domain / purpose</b> of the application you are studying. Why specifically are mixins used for this particular domain? 
                                    <br><span style="font-size: 10px;">Pacing: Perhaps reserve ~2 min for this question.</span>
                                </p>
                                <textarea rows="2" style="width: 100%; max-width: 100%;"></textarea>
                                <br><br>
                            {% endfor %}
                        {% endfor %}
                        <h4>Inheritence Lesson</h4>
                        <p>Inheritance is the mechanism of basing a class upon another class (class-based inheritance), with the child class retaining a similar implementation from the parent class.</p>
                        <p>Implementation inheritance is the mechanism whereby a subclass re-uses code in a base class. By default the subclass retains all of the operations of the base class, but the subclass may override some or all operations, replacing the base-class implementation with its own. [src: https://en.wikipedia.org/wiki/Inheritance_(object-oriented_programming)#Code_reuse]</p>
                        <p>In the following Python example, subclasses SquareSumComputer and CubeSumComputer override the transform() method of the base class SumComputer. The base class comprises operations to compute the sum of the transformations of two integers. The subclass re-uses all of the functionality of the base class with the exception of the operation that transforms a number into its square, replacing it with an operation that transforms a number into its square and cube respectively. The subclasses therefore compute the sum of the squares/cubes between two integers.</p>
                        <pre>
                            class SumComputer:
                                def __init__(self, a, b):
                                    self.a = a
                                    self.b = b

                                def transform(self, x):
                                    raise NotImplementedError

                                def inputs(self):
                                    return range(self.a, self.b)

                                def compute(self):
                                    return sum(self.transform(value) for value in self.inputs())

                            class SquareSumComputer(SumComputer):
                                def transform(self, x):
                                    return x * x

                            class CubeSumComputer(SumComputer):
                                def transform(self, x):
                                    return x * x * x
                        </pre>
                        <table id="mixin-tradeoff" class="table">
                            <tr>
                                <th>Pattern</th>
                                <th>Definition and Reasons</th>
                                <th>Example</th>
                                <th>Tradeoff</th>
                            </tr>
                            <tr>
                                <td>Mixin</td>
                                <td>Mixins let a class adopt methods and attributes of another class. Reasons: <br>(A) code reuse <br>(B) optional methods / attributes <br>(C) compartmentalization</td>
                                <td>Werkzeug's Request / Response System Reasons: <br>(A) all Requests (SpecialRequest, ExtraSpecialRequest, etc) can use the AcceptMixin mixin <br>(B) the mixins let you allow more supports as needed, but not by default, to instances of the Request classes (i.e. AcceptMixin for SpecialRequest, 4 mixins for ExtraSpecialRequest) <br>(C) functionality for requests in general (AcceptMixin, ETagRequestMixin, etc.) can be separated from ExtraSpecialRequest-specific functionality (i.e. the logic in the esr_method)</td>
                                <td>
                                    Why were mixins useful for {{dp.project}} specifically? Hint, think about tradeoffs over multiple inheritence and about multiple inheritence issues. Remember the "Multiple Versions of Methods / Props Note" above. 
                                    <br><span style="font-size: 10px;">Pacing: Perhaps reserve ~3 min for this question.</span>
                                    <br><br>
                                    <textarea rows="4" style="width: 100%; max-width: 100%;"></textarea>
                                </td>
                            </tr>
                            <tr>
                                <td>Inheritence</td>
                                <td>Reasons:<br>(A) code reuse<br>(B) allows for extending classes</td>
                                <td>Inheritance Example of Sum / Cube Computer:<br>(A) code is reused between sum and cube computer<br>(B) a more specific class SquareSumComputer, CubeSumComputer can extend a more generic class SumComputer.</td>
                                <td>
                                    Why would inheritence not work for {{dp.project}} specifically?
                                    <br><span style="font-size: 10px;">Pacing: Perhaps reserve ~3 min for this question.</span>
                                    <br><br>
                                    <textarea rows="4" style="width: 100%; max-width: 100%;"></textarea>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <br>
                    <div id="mvs">
                        <h2>MV* Lesson</h2>
                        <p>MV* (MVC, MVVM, MVP, MVT) divide user interface implementations into 3 interconnected elements - the model for data related management, the view (or in the case of django the "template") for visual representations, and the controller for logic for manipulating the model or view. Nuances and examples:</p>
                        <ul>
                            <li>The model is responsible for managing the data of the application. It receives user input from the controller.</li>
                            <li>The view renders presentation of the model in a particular format.</li>
                            <li>The controller responds to the user input and performs interactions on the data model objects. The controller receives the input, optionally validates it and then passes the input to the model.</li>
                        </ul>
                        <p>Please take a skim of <a target="_blank" href="http://127.0.0.1:9000/static/ralemodules/MVC-MVP-MVVM.pdf">this tutorial of MVC vs MVP vs MVVM</a>.</p>
                        <p>Please take a skim of <a target="_blank" href="http://127.0.0.1:9000/static/ralemodules/MVC-MVT.pdf">this tutorial of MVC vs MVT</a>.</p>
                        <p>Consider a <a href="https://todomvc.com/examples/react/#/" target="_blank">standard TODO application</a> with the following <a href="https://github.com/tastejs/todomvc/tree/master/examples/react" target="_blank">source code</a>. Here is a diagram of the MVC of the TODO app.</p>
                        <div class="row">
                            <div class="col-sm-5">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <b>Templates / Views</b>
                                            <p><a href="https://github.com/tastejs/todomvc/blob/master/examples/react/js/todoItem.jsx#L78" target="_blank">TodoItem's render</a></p>
                                            <p><a href="https://github.com/tastejs/todomvc/blob/master/examples/react/js/app.jsx#L136" target="_blank">Creating / Toggling Todo's</a></p>
                                            <p><a href="https://github.com/tastejs/todomvc/blob/master/examples/react/js/footer.jsx" target="_blank">Footer</a></p>
                                        <br>
                                        <b>Roles</b>
                                        <p>Frontend Developers</p>
                                        <p>Fullstack Developers</p>
                                    </div>
                                    <div class="col-sm-6">
                                        <p style="text-align: center;">→</p>
                                        <br>
                                        <p style="font-size:12px;">The template sends todo item updates (edits, deletions, additions) to the controller. The controller sends all the todo items to the template for rendering in a list.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <b>Controllers</b> 
                                <p><a href="https://github.com/tastejs/todomvc/blob/master/examples/react/js/app.jsx" target="_blank">To Do CRUD Controller</a><br> (CRUD = create, read, update, delete)</p>
                                <p><a href="https://github.com/tastejs/todomvc/blob/master/examples/react/js/todoItem.jsx" target="_blank">To Do Change Bindings</a><br></p>
                                <br>
                                <b>Roles</b>
                                <p>Backend Developers</p>
                                <p>Fullstack Developers</p>
                            </div>
                            <div class="col-sm-4">
                                <div class="row">
                                    <div class="col-sm-8">
                                        <p style="text-align: center;">←</p>
                                        <br>
                                        <p style="font-size:12px;">The To Do CRUD controller queries the ToDoItem model of the logged in user to retrieve their todo items.</p>
                                        <br><br>
                                        <p style="font-size:12px;">The To Do Change Bindings controller takes the user inputted frontend data and saves it to the ToDoItem model's table in the backend database.</p>
                                    </div>
                                    <div class="col-sm-4">
                                        <b>Models</b>
                                            <p>TodoItem</p>
                                            <p>User</p>
                                        <br>
                                        <b>Roles</b>
                                        <p>Backend Developers</p>
                                        <p>Database Admin</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <h3>MV* of {{ dp.project }}</h3>
                        <div class="row">
                            <div class="col-sm-5">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <b>Templates / Views</b>
                                        {% for template in dp.templates %}
                                            <p>
                                                {{template.name}}<br>
                                                <span style="font-size:10px;">May use {{template.model}} model but check.</span>
                                            </p>
                                        {% endfor %}
                                        <br>
                                        <b>Roles</b>
                                        <p>Frontend Developers</p>
                                        <p>Fullstack Developers</p>
                                    </div>
                                    <div class="col-sm-6">
                                        <p style="text-align: center;">→</p>
                                        <br>
                                        <p style="font-size:12px;">The controller fills in / manipulates the template with data.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <b>Controllers</b> 
                                {% for controller in dp.views %}
                                    <p>
                                        {{controller.name}}<br>
                                        <span style="font-size:10px;">May use {{controller.model}} model but check.</span>
                                    </p>
                                {% endfor %}
                                <br>
                                <b>Roles</b>
                                <p>Backend Developers</p>
                                <p>Fullstack Developers</p>
                            </div>
                            <div class="col-sm-4">
                                <div class="row">
                                    <div class="col-sm-8">
                                        <p style="text-align: center;">←</p>
                                        <br>
                                        <p style="font-size:12px;">The controller accesses / manipulates the model.</p>
                                        <br><br>
                                        <p style="font-size:12px;">The controller fills in / manipulates the model with user input data.</p>
                                    </div>
                                    <div class="col-sm-4">
                                        <b>Models</b>
                                        {% for model in dp.models %}
                                            <p>{{model}}</p>
                                        {% endfor %}
                                        <br>
                                        <b>Roles</b>
                                        <p>Backend Developers</p>
                                        <p>Database Admin</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% for model in dp.models %}
                            <h4>{{model}}</h4>
                            <p id="{{model}}-a1">Activity 1: Describe the {{model}} model. Hint: Look where the model class is defined in the code - it is surfaced for you.
                                <br><span style="font-size: 10px;">Pacing: Perhaps reserve ~0.5 min for this question.</span>
                            </p>
                            <textarea rows="2" style="width: 100%; max-width: 100%;"></textarea>
                            <br><br>
                            <p id="{{model}}-a2">Activity 2: Name the class that is the {{model}} model's controller (in Django, confusingly, they say 'View' for the MV* controller, and 'Template' for view). Hint: Look at the diagram above.
                                <br><span style="font-size: 10px;">Pacing: Perhaps reserve ~0.5 min for this question.</span>
                            </p>
                            <textarea rows="2" style="width: 100%; max-width: 100%;"></textarea>
                            <br><br>
                            <p id="{{model}}-a3">Activity 3: Name the URI path that corresponds to the {{model}} model's view (in Django, confusingly, they say 'Template' for the MV* view). Hint: Look at the diagram above.
                                <br><span style="font-size: 10px;">Pacing: Perhaps reserve ~0.5 min for this question.</span>
                            </p>
                            <textarea rows="2" style="width: 100%; max-width: 100%;"></textarea>
                            <br><br>
                        {% endfor %}
                        {% for controller in dp.views %}
                            <h4>{{controller.name}}</h4>
                            <p id="{{controller.name}}-a4">Activity 4: (i) How does this controller access / manipulate the data model? Hint: Scan the {{controller.name}} code that has been surfaced for you. (ii) What data does the model provide the controller? (iii) Does the controller also manipulate the model, i.e. create / edit / delete model instances and if so with what information, or is it just read only?
                                <br><span style="font-size: 10px;">Pacing: Perhaps reserve ~0.5 min for this question.</span>
                            </p>
                            <textarea rows="2" style="width: 100%; max-width: 100%;"></textarea>
                            <br><br>
                            <p id="{{controller.name}}-a5">Activity 5: (i) How does the model data get to the view (i.e. template)? (ii) What data does the model provide and how does it fill the template? <br><br> Hint 1: Scan the {{controller.name}} code, and the code of the relevant templates you mentioned from Activity 3 above, and the code of relevant model classes. They are surfaced / linked for you. <br> Hint 2: Consider which part, Model code vs. Controller code, is responsible for database touching logic vs. template data preparation. <br> Hint 3: Look at the URL configuration files (i.e. urls.py) too. <br> Hint 4: If you have time, go to the Network tab in CDT and inspect the URLs corresponding to this view, as specified in urls.py.<br>
                                <br><span style="font-size: 10px;">Pacing: Perhaps reserve ~0.5 min for this question.</span>
                            </p>
                            <textarea rows="2" style="width: 100%; max-width: 100%;"></textarea>
                            <br><br>
                        {% endfor %}
                        <h4>MV* for Posthog</h4>
                        <p id="{{model}}-a6">Activity 6: Specifically for {{dp.project}}, why is MV* used here?
                            <br><span style="font-size: 10px;">Pacing: Perhaps reserve ~1.5 min for this question.</span>
                        </p>
                        <textarea rows="2" style="width: 100%; max-width: 100%;"></textarea>
                        <br><br>
                        <h4>
                            {% for template in dp.templates %}
                                {{template.name}}, 
                            {% endfor %}
                            Templates
                        </h4>
                        <p id="a7">Activity 7: (i) Would you consider these templates (surfaced from the codebase for you) part of an MVC, MVVM, MVP, MVT, or other architecture? (ii) And specifically for {{dp.project}}, why do you think the code architects chose that?
                            <br><span style="font-size: 10px;">Pacing: Perhaps reserve ~3.5 min for this question.</span>
                        </p>
                        <textarea rows="2" style="width: 100%; max-width: 100%;"></textarea>
                        <br><br>
                        <h3>MV* of {{ dp.project }}</h3>
                        <div class="row">
                            <div class="col-sm-5">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <b>Templates / Views</b>
                                        {% for template in dp.templates %}
                                            <p>
                                                {{template.name}}<br>
                                                <span style="font-size:10px;">May use {{template.model}} model but check.</span>
                                            </p>
                                        {% endfor %}
                                        <br>
                                        <b>Roles</b>
                                        <p>Frontend Developers</p>
                                        <p>Fullstack Developers</p>
                                    </div>
                                    <div class="col-sm-6">
                                        <p style="text-align: center;">→</p>
                                        <br>
                                        <p style="font-size:12px;">Describe how the controller fills in / manipulates the template (i.e. with what data)
                                            <br><span style="font-size: 10px;">Pacing: Perhaps reserve ~2.5 min for this question.</span>
                                        </p>
                                        <textarea rows="8" style="width: 100%; max-width: 100%;"></textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <b>Controllers</b> 
                                {% for controller in dp.views %}
                                    <p>
                                        {{controller.name}}<br>
                                        <span style="font-size:10px;">May use {{controller.model}} model but check.</span>
                                    </p>
                                {% endfor %}
                                <br>
                                <b>Roles</b>
                                <p>Backend Developers</p>
                                <p>Fullstack Developers</p>
                            </div>
                            <div class="col-sm-4">
                                <div class="row">
                                    <div class="col-sm-8">
                                        <p style="text-align: center;">←</p>
                                        <br>
                                        <p style="font-size:12px;">Describe how the controller accesses / manipulates the model.
                                            <br><span style="font-size: 10px;">Pacing: Perhaps reserve ~2.5 min for this question.</span>
                                        </p>
                                        <textarea rows="5" style="width: 100%; max-width: 100%;"></textarea>
                                        <br><br>
                                        <p style="font-size:12px;">Describe how the controller fills in / manipulates the model (i.e. with what data).
                                            <br><span style="font-size: 10px;">Pacing: Perhaps reserve ~2.5 min for this question.</span>
                                        </p>
                                        <textarea rows="5
                                        " style="width: 100%; max-width: 100%;"></textarea>
                                    </div>
                                    <div class="col-sm-4">
                                        <b>Models</b>
                                        {% for model in dp.models %}
                                            <p>{{model}}</p>
                                        {% endfor %}
                                        <br>
                                        <b>Roles</b>
                                        <p>Backend Developers</p>
                                        <p>Database Admin</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br><br>
                        <table id="mvs-tradeoff" class="table">
                            <tr>
                                <th>Pattern</th>
                                <th>Definition and Reasons</th>
                                <th>Example</th>
                                <th>Tradeoff</th>
                            </tr>
                            <tr>
                                <td>MV*</td>
                                <td>
                                    Model-view-controller architectures, described above, and 
                                    <a href="http://127.0.0.1:9000/static/ralemodules/MVC-MVP-MVVM.pdf" target="_blank">MVC vs MVP vs MVVM</a></td>
                                <td>
                                    <a href="http://127.0.0.1:9000/static/ralemodules/MVC-MVP-MVVM.pdf" target="_blank">MVC vs MVP vs MVVM</a>
                                    <ul>
                                        <li>(A) separation of visualization, processing, data management</li>
                                        <li>(B) modularity</li>
                                        <li>(C) flexibility</li>
                                        <li>(D) testability</li>
                                        <li>(E) maintainability</li>
                                    </ul>    
                                </td>
                                <td>
                                    Why was MV* useful specifically for {{dp.project}}? Hint - think about tradeoffs over not using any framework.
                                    <br><span style="font-size: 10px;">Pacing: Perhaps reserve ~2.5 min for this question.</span>
                                    <br><br>
                                    <textarea rows="4" style="width: 100%; max-width: 100%;"></textarea>
                                </td>
                            </tr>
                            <tr>
                                <td>No Framework</td>
                                <td>Not using any framework. Mixing data touching, view touching logic like in <a href="https://en.wikipedia.org/wiki/PHP#Syntax" target="_blank">vanilla PHP</a>.</td>
                                <td><a href="https://en.wikipedia.org/wiki/PHP#Syntax" target="_blank">vanilla PHP</a</td>
                                <td>
                                    Why would no framework not work specifically for {{dp.project}}?
                                    <br><span style="font-size: 10px;">Pacing: Perhaps reserve ~2.5 min for this question.</span>
                                    <br><br>
                                    <textarea rows="4" style="width: 100%; max-width: 100%;"></textarea>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <br><br>
    </body>
</html>